export default function(){
    let
        editpage=this,
        showHtmlA=document.getElementById('showHtmlA'),
        htmlEditorA=document.getElementById('htmlEditorA'),
        previewA=document.getElementById('previewA'),
        button_save=document.getElementById('button_save'),
        button_submit=document.getElementById('button_submit'),
        input_newtag=document.getElementById('input_newtag'),
        input_newname=document.getElementById('input_newname')
    addEventListener('keydown',e=>{
        if(!(
            e.ctrlKey&&e.shiftKey&&e.keyCode==83
        ))
            return
        ;(async()=>{
            let page=await editpage.submit()
            onbeforeunload=null
            location=page.id
        })()
    })
    showHtmlA.addEventListener('click',e=>{
        e.preventDefault()
        editpage.show_html()
    })
    htmlEditorA.addEventListener('click',e=>{
        e.preventDefault()
        editpage.show_htmleditor()
    })
    previewA.addEventListener('click',e=>{
        e.preventDefault()
        editpage.show_preview()
    })
    button_save.addEventListener('click',()=>{
        // to-do: let user know
        editpage.submit()
    })
    button_submit.addEventListener('click',async()=>{
        let page=await editpage.submit()
        onbeforeunload=null
        location=page.id
    })
    input_newtag.addEventListener('keypress',e=>{
        editpage.setOfTags.onkeypress(e)
    })
    input_newname.addEventListener('keypress',e=>{
        editpage.setOfNames.onkeypress(e)
    })
}
